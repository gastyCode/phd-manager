@inherits LayoutComponentBase

@using PhDManager.Core.Models

<RadzenComponents @rendermode="InteractiveServer" />

<RadzenLayout>

    <RadzenHeader>
        <RadzenStack class="height-full" Orientation="Orientation.Vertical" JustifyContent="JustifyContent.Center" AlignItems="AlignItems.Center" Gap="0">
            <RadzenRow>
                <CultureSelect />
            </RadzenRow>
            
            <RadzenRow class="rz-p-1 width-full" JustifyContent="JustifyContent.SpaceBetween" AlignItems="AlignItems.Center">

                <RadzenStack Orientation="Orientation.Horizontal" AlignItems="AlignItems.Center" Gap="0">
                    <RadzenSidebarToggle class="margin-none" Click="@(() => _sidebarExpanded = !_sidebarExpanded)" />
                    <RadzenLink Path="/">
                        <RadzenImage Path="uniza_logo.png" class="logo-size" />
                    </RadzenLink>
                </RadzenStack>

                <RadzenStack Orientation="Orientation.Horizontal" AlignItems="AlignItems.Center">
                    <AuthorizeView>
                        <Authorized>
                            <RadzenProfileMenu>
                                <Template>
                                    <RadzenText class="text-color-base" TextStyle="TextStyle.Button">@context.User.Identity?.Name</RadzenText>
                                </Template>
                                <ChildContent>
                                    <RadzenProfileMenuItem Text="Log out" Path="logout"></RadzenProfileMenuItem>
                                </ChildContent>
                            </RadzenProfileMenu>
                        </Authorized>
                        <NotAuthorized>
                            <RadzenLink class="rz-mx-2" Path="/login">Log in</RadzenLink>
                        </NotAuthorized>
                    </AuthorizeView>
                </RadzenStack>

            </RadzenRow>
        </RadzenStack>
    </RadzenHeader>

    <RadzenSidebar Responsive="false" class="absolute width-fit" @bind-Expanded="@_sidebarExpanded">
        <RadzenPanelMenu DisplayStyle="@(_sidebarExpanded ? MenuItemDisplayStyle.IconAndText : MenuItemDisplayStyle.Icon)" ShowArrow="false">

            <AuthorizeView Roles=@($"{nameof(Role.Admin)}")>
                <Authorized>
                    <RadzenPanelMenuItem Path="admin-panel" Text="Admin Panel" Icon="admin_panel_settings" />
                </Authorized>
            </AuthorizeView>

            <RadzenPanelMenuItem Path="" Text="Home" Icon="home" />
            <RadzenPanelMenuItem Path="theses" Text="Thesis Selection" Icon="assignment" />

        </RadzenPanelMenu>
    </RadzenSidebar>

    <RadzenBody id="body">
        @Body
    </RadzenBody>

</RadzenLayout>

@code {
    private bool _sidebarExpanded = false;
}
