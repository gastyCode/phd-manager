@inherits LayoutComponentBase

<RadzenComponents @rendermode="InteractiveServer" />

<RadzenLayout>

    <RadzenHeader>
        <RadzenStack style="height: 100%" Orientation="Orientation.Horizontal" JustifyContent="JustifyContent.Center" AlignItems="AlignItems.Center" Gap="0">
            <RadzenRow class="rz-p-1" JustifyContent="JustifyContent.SpaceBetween" AlignItems="AlignItems.Center" Style="width: 100%;">

                <RadzenStack Orientation="Orientation.Horizontal" AlignItems="AlignItems.Center" Gap="0">
                    <AuthorizeView>
                        <Authorized>
                            <RadzenSidebarToggle Click="@(() => _sidebarExpanded = !_sidebarExpanded)" />
                        </Authorized>
                    </AuthorizeView>
                    <RadzenLink Path="/">
                        <RadzenImage Path="uniza_logo.png" Style="height: 50px" />
                    </RadzenLink>
                </RadzenStack>

                <RadzenStack Orientation="Orientation.Horizontal" AlignItems="AlignItems.Center">
                    <CultureSelect />
                    <AuthorizeView>
                        <Authorized>
                            <RadzenMenu>
                                <RadzenMenuItem Text="@context.User.Identity?.Name">
                                    <RadzenMenuItem Text="Log out" Path="logout"></RadzenMenuItem>
                                </RadzenMenuItem>
                            </RadzenMenu>
                        </Authorized>
                        <NotAuthorized>
                            <RadzenLink class="rz-mx-2" Path="/login">Log in</RadzenLink>
                        </NotAuthorized>
                    </AuthorizeView>
                </RadzenStack>

            </RadzenRow>
        </RadzenStack>
    </RadzenHeader>

    <AuthorizeView>
        <Authorized>
            <RadzenSidebar @bind-Expanded="@_sidebarExpanded">
                <RadzenPanelMenu>

                    <AuthorizeView Roles="Admin" Context="adminContext">
                        <Authorized>
                            <RadzenPanelMenuItem Path="admin-panel" Text="Admin Panel" Icon="admin_panel_settings" />
                        </Authorized>
                    </AuthorizeView>

                    <RadzenPanelMenuItem Path="" Text="Home" Icon="home" />

                </RadzenPanelMenu>
            </RadzenSidebar>
        </Authorized>
    </AuthorizeView>

    <RadzenBody class="rz-p-4">
        @Body
    </RadzenBody>

</RadzenLayout>

@code {
    private bool _sidebarExpanded = true;
}
